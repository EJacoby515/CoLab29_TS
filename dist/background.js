chrome.action.onClicked.addListener((t=>{chrome.scripting.executeScript({target:{tabId:t.id},files:["contentScript.js"]})})),chrome.runtime.onMessage.addListener((function(t,e,a){if("hello"===t.greeting&&a({farewell:"goodbye"}),"startup"===t.action){try{chrome.storage.sync.get(["focusData"]).then((t=>{null===t.focusData?chrome.storage.sync.set({focusData:{currentGoal:{subtasks:[]}}}).then((t=>{a("returning")})):a("onboarding")}))}catch(t){a(t)}return!0}if("fetchGoals"===t.action)return chrome.storage.sync.get(["focusData"]).then((t=>{const e=t.focusData||{};a(e.currentGoal)})),!0;if("appendCurrentGoal"===t.action){const{data:e}=t;return chrome.storage.sync.get(["focusData"]).then((t=>{const n=t.focusData||{};n.currentGoal={name:e},chrome.storage.sync.set({focusData:n}).then((()=>{a(n)}))})),!0}if("appendSubtasks"===t.action){const{data:e}=t;return console.log(e),chrome.storage.sync.get(["focusData"]).then((t=>{const n=t.focusData||{};n.currentGoal=n.currentGoal||{},n.currentGoal.subtasks=n.currentGoal.subtasks||[];for(let t=0;t<e.length;t++){let a={name:e[t],completed:!1,studynotes:null,emoji:null,reflection:null,timestart:null,timeend:null};n.currentGoal.subtasks.push(a)}chrome.storage.sync.set({focusData:n}).then((()=>{a(n)}))})),!0}}));